<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <title>DesafÃ­o TIC - Juego de Preguntas</title><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script><!-- Element SDK -->
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
    }
    /* Transiciones suaves entre pantallas y botones */
    .fade-enter {
      opacity: 0;
      transform: translateY(8px);
    }
    .fade-enter-active {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 240ms ease, transform 240ms ease;
    }
    .card-shadow {
      box-shadow: 0 10px 25px rgba(0,0,0,0.18);
    }
    .focus-ring {
      outline: 3px solid rgba(255,255,255,0.7);
      outline-offset: 2px;
    }
    /* Animaciones interactivas */
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(255,255,255,0.3); }
      50% { box-shadow: 0 0 40px rgba(255,255,255,0.6); }
    }
    @keyframes float-icon {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    .interactive-question {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    .interactive-icon {
      animation: float-icon 2s ease-in-out infinite;
      font-size: 3rem;
      display: inline-block;
    }
    .option-hover {
      transition: all 0.2s ease;
    }
    .option-hover:hover {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }
    .correct-feedback {
      animation: pulse-glow 0.6s ease-in-out;
    }
    .incorrect-feedback {
      animation: shake 0.4s ease-in-out;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full antialiased">
  <header class="sr-only">
   <h1 id="app-main-title">DesafÃ­o TIC: Pon a prueba tus conocimientos</h1>
  </header>
  <main id="app-root" class="h-full w-full flex items-center justify-center p-4"><!-- Contenedor principal del juego -->
   <section id="game-container" class="relative w-full max-w-4xl h-full max-h-[900px] mx-auto rounded-3xl overflow-hidden flex flex-col"><!-- Fondo general (se recolorea con config) -->
    <div id="background-layer" class="absolute inset-0 pointer-events-none"></div><!-- Contenido -->
    <div class="relative flex-1 flex flex-col"><!-- Pantalla Inicio -->
     <section id="screen-start" class="h-full flex flex-col items-center justify-center px-6 text-center space-y-6 fade-enter">
      <div class="flex flex-col items-center space-y-3"><!-- Iconos tech -->
       <div class="flex space-x-3 text-3xl" aria-hidden="true"><span>ğŸ’»</span> <span>ğŸŒ</span> <span>ğŸ“±</span> <span>ğŸ”’</span> <span>â˜ï¸</span>
       </div>
       <h2 id="start-title" class="font-bold tracking-tight"></h2>
       <p id="start-subtitle" class="max-w-xl"></p>
      </div><!-- PequeÃ±a â€œtexturaâ€ tecnolï¿½ï¿½gica con nodos -->
      <div class="max-w-xl w-full mt-4">
       <svg viewbox="0 0 400 120" class="w-full h-auto" aria-hidden="true"><defs>
         <lineargradient id="gridGradient" x1="0" x2="1" y1="0" y2="1">
          <stop offset="0%" stop-color="#ffffff" stop-opacity="0.4" />
          <stop offset="100%" stop-color="#ffffff" stop-opacity="0.05" />
         </lineargradient>
        </defs> <path d="M10 30 L390 30 M10 60 L390 60 M10 90 L390 90" stroke="url(#gridGradient)" stroke-width="1" /> <circle cx="60" cy="30" r="4" fill="#ffffff" fill-opacity="0.8" /> <circle cx="200" cy="60" r="4" fill="#ffffff" fill-opacity="0.8" /> <circle cx="340" cy="90" r="4" fill="#ffffff" fill-opacity="0.8" />
       </svg>
      </div><button id="btn-start" type="button" class="mt-4 inline-flex items-center justify-center px-8 py-3 rounded-full font-semibold shadow-lg focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">â–¶</span> <span>Iniciar juego</span> </button>
     </section><!-- Pantalla Instrucciones -->
     <section id="screen-instructions" class="hidden h-full flex-col items-center justify-center px-6 text-center space-y-6 fade-enter">
      <div class="max-w-2xl w-full bg-white/95 rounded-2xl card-shadow px-8 py-8">
       <h2 id="instructions-title" class="font-semibold mb-4"></h2>
       <ul class="text-left space-y-2 mb-6">
        <li class="flex items-start"><span class="mr-2" aria-hidden="true">ğŸ¯</span> <span>Responde todas las preguntas correctamente.</span></li>
        <li class="flex items-start"><span class="mr-2" aria-hidden="true">ï¸âƒ£</span> <span>Cada pregunta tiene 4 opciones.</span></li>
        <li class="flex items-start"><span class="mr-2" aria-hidden="true">âœ”</span> <span>Solo una opciÃ³n es correcta.</span></li>
        <li class="flex items-start"><span class="mr-2" aria-hidden="true">ğŸ–±</span> <span>Haz clic en una respuesta para avanzar.</span></li>
       </ul>
       <div class="flex items-center justify-center space-x-4 text-2xl mb-4" aria-hidden="true"><span>âœ”</span> <span>âŒ</span> <span>ğŸ’¡</span>
       </div><button id="btn-go-questions" type="button" class="inline-flex items-center justify-center px-7 py-3 rounded-full font-semibold shadow-md focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">â–¶</span> <span>Comenzar</span> </button>
      </div>
     </section><!-- Pantalla Preguntas -->
     <section id="screen-question" class="hidden h-full flex flex-col items-center justify-center px-4 fade-enter">
      <div class="max-w-3xl w-full"><!-- Progreso / encabezado -->
       <div class="flex items-center justify-between mb-4">
        <h2 id="question-title" class="font-semibold"></h2>
        <div class="flex items-center space-x-2 text-sm"><span class="opacity-80">Progreso</span>
         <div class="w-40 h-2 bg-white/20 rounded-full overflow-hidden">
          <div id="progress-bar" class="h-full rounded-full"></div>
         </div>
        </div>
       </div>
       <div id="question-card" class="bg-white rounded-2xl card-shadow px-6 py-6 md:px-8 md:py-8">
        <div class="flex items-center mb-4 space-x-3"><span id="question-icon" class="text-2xl" aria-hidden="true">â“</span>
         <p id="question-text" class="font-medium"></p>
        </div>
        <form id="options-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4" aria-labelledby="question-title"><!-- Botones de opciÃ³n, se rellenan por JS --> <button id="option-a" type="button" class="option-hover flex items-center justify-start px-4 py-3 rounded-xl font-semibold focus:outline-none focus-visible:focus-ring"> <span class="mr-2 font-bold">A.</span> <span class="text-left flex-1"></span> </button> <button id="option-b" type="button" class="option-hover flex items-center justify-start px-4 py-3 rounded-xl font-semibold focus:outline-none focus-visible:focus-ring"> <span class="mr-2 font-bold">B.</span> <span class="text-left flex-1"></span> </button> <button id="option-c" type="button" class="option-hover flex items-center justify-start px-4 py-3 rounded-xl font-semibold focus:outline-none focus-visible:focus-ring"> <span class="mr-2 font-bold">C.</span> <span class="text-left flex-1"></span> </button> <button id="option-d" type="button" class="option-hover flex items-center justify-start px-4 py-3 rounded-xl font-semibold focus:outline-none focus-visible:focus-ring"> <span class="mr-2 font-bold">D.</span> <span class="text-left flex-1"></span> </button>
        </form>
       </div>
      </div>
     </section><!-- Pantalla Correcto -->
     <section id="screen-correct" class="hidden h-full flex flex-col items-center justify-center px-6 text-center fade-enter">
      <div class="max-w-xl w-full bg-white/95 rounded-2xl card-shadow px-8 py-10 flex flex-col items-center space-y-4 correct-feedback">
       <div class="text-6xl interactive-icon" aria-hidden="true">
        âœ”
       </div>
       <h2 class="text-2xl font-semibold">Â¡Correcto!</h2>
       <p>Â¡Bien hecho! ContinÃºa con la siguiente pregunta.</p><button id="btn-next-question" type="button" class="mt-4 inline-flex items-center justify-center px-7 py-3 rounded-full font-semibold shadow-md focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">â–¶</span> <span>Siguiente</span> </button>
      </div>
     </section><!-- Pantalla Incorrecto -->
     <section id="screen-incorrect" class="hidden h-full flex flex-col items-center justify-center px-6 text-center fade-enter">
      <div class="max-w-xl w-full bg-white/95 rounded-2xl card-shadow px-8 py-10 flex flex-col items-center space-y-4 incorrect-feedback">
       <div class="text-6xl" aria-hidden="true">
        âŒ
       </div>
       <h2 class="text-2xl font-semibold">Â¡Incorrecto!</h2>
       <p>Revisa el contenido y vuelve a intentarlo.</p><button id="btn-try-again" type="button" class="mt-4 inline-flex items-center justify-center px-7 py-3 rounded-full font-semibold shadow-md focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">â†©</span> <span>Intentar otra vez</span> </button>
      </div>
     </section><!-- Pantalla Final -->
     <section id="screen-end" class="hidden h-full flex flex-col items-center justify-center px-6 text-center fade-enter">
      <div class="max-w-xl w-full bg-white/95 rounded-2xl card-shadow px-8 py-10 flex flex-col items-center space-y-4">
       <div class="text-6xl" aria-hidden="true">
        ğŸ†
       </div>
       <h2 id="final-title" class="text-2xl font-semibold"></h2>
       <p id="final-text" class="max-w-md"></p>
       <p class="text-sm opacity-75">Puedes volver a iniciar el juego o regresar al inicio.</p>
       <div class="flex flex-wrap items-center justify-center gap-4 mt-4"><button id="btn-restart" type="button" class="inline-flex items-center justify-center px-7 py-3 rounded-full font-semibold shadow-md focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">ğŸ”„</span> <span>Reiniciar juego</span> </button> <button id="btn-back-home" type="button" class="inline-flex items-center justify-center px-7 py-3 rounded-full font-semibold shadow-md focus:outline-none focus-visible:focus-ring transition-colors"> <span class="mr-2 text-xl">â¬…</span> <span>Volver al inicio</span> </button>
       </div>
      </div><!-- Confeti digital de fondo -->
      <div class="absolute inset-0 pointer-events-none -z-10">
       <svg viewbox="0 0 400 200" class="w-full h-full opacity-70" aria-hidden="true"><rect x="30" y="20" width="8" height="20" fill="#ffffff" fill-opacity="0.6" /> <rect x="90" y="60" width="10" height="18" fill="#ffffff" fill-opacity="0.5" /> <rect x="160" y="30" width="6" height="24" fill="#ffffff" fill-opacity="0.7" /> <rect x="230" y="80" width="9" height="22" fill="#ffffff" fill-opacity="0.55" /> <rect x="310" y="40" width="7" height="18" fill="#ffffff" fill-opacity="0.6" /> <circle cx="60" cy="140" r="4" fill="#ffffff" fill-opacity="0.6" /> <circle cx="190" cy="170" r="5" fill="#ffffff" fill-opacity="0.5" /> <circle cx="320" cy="130" r="4" fill="#ffffff" fill-opacity="0.65" />
       </svg>
      </div>
     </section>
    </div>
    <footer class="w-full py-2 px-4 text-xs text-center opacity-75">
     Unidad 1 â€“ FundamentaciÃ³n TIC â€¢ Juego de ejemplo (puedes adaptarlo en Genially)
    </footer>
   </section>
  </main>
  <script>
    // ==========================
    // CONFIGURACIÃ“N EDITABLE
    // ==========================
    const defaultConfig = {
      // Colores (hasta 5)
      background_color: "#1b214f",      // Fondo principal azul/morado
      surface_color: "#242b63",         // Paneles secundarios
      text_color: "#ffffff",            // Texto principal
      primary_action_color: "#22c55e",  // Botones principales (verde)
      secondary_action_color: "#6366f1",// Botones secundarios (morado)

      // Fuente y tamaÃ±o base
      font_family: "Montserrat",
      font_size: 16,

      // Textos principales
      main_title: "DesafÃ­o TIC: Pon a prueba tus conocimientos",
      subtitle: "Juego interactivo basado en la Unidad 1 â€“ FundamentaciÃ³n TIC",
      instructions_title: "Â¿CÃ³mo jugar?",
      final_title: "ğŸ‰ Â¡Juego completado!",
      final_text: "Has terminado las preguntas del juego."
    };

    // ==========================
    // LÃ“GICA DEL JUEGO
    // ==========================
    const questions = [
      {
        text: "Â¿QuÃ© son las TIC segÃºn la Ley 1341 de 2009?",
        options: [
          "TecnologÃ­as de InnovaciÃ³n y Conectividad",
          "TecnologÃ­as de la InformaciÃ³n y las Comunicaciones",
          "TecnologÃ­as Industriales y Comerciales",
          "TÃ©cnicas de Internet y ComputaciÃ³n"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Â¿QuÃ© es la tecnologÃ­a segÃºn Economipedia?",
        options: [
          "Un proceso netamente industrial",
          "Un conjunto de aparatos modernos",
          "La respuesta del ser humano para transformar el entorno y mejorar su calidad de vida",
          "Un sistema utilizado solo por ingenieros"
        ],
        correctIndex: 2,
        interactive: true,
        icon: "ğŸ”§"
      },
      {
        text: "Â¿QuÃ© se requiere para que haya comunicaciÃ³n?",
        options: [
          "Solo tener internet",
          "Un emisor, un receptor y medios adecuados",
          "Equipos costosos",
          "Ãšnicamente un celular"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Los componentes informÃ¡ticos se dividen enâ€¦",
        options: [
          "AnÃ¡logos y digitales",
          "ElÃ©ctricos, electrÃ³nicos e informÃ¡ticos",
          "Manuales y automÃ¡ticos",
          "Computacionales y virtuales"
        ],
        correctIndex: 1,
        interactive: true,
        icon: "ğŸ’»"
      },
      {
        text: "Â¿QuÃ© es un sistema operativo?",
        options: [
          "Un programa que sirve Ãºnicamente para jugar",
          "El software principal que administra recursos y permite instalar otros programas",
          "Una aplicaciÃ³n descargable",
          "Un tipo de hardware"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Â¿QuÃ© se entiende por licencia de software?",
        options: [
          "Un permiso opcional para instalar juegos",
          "Un contrato que permite usar legalmente un software",
          "Un archivo descargable gratuito",
          "Un documento sin validez legal"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Â¿QuÃ© es una red informÃ¡tica?",
        options: [
          "Conjunto de dispositivos que solo almacenan datos",
          "Conjunto de dispositivos conectados para compartir recursos",
          "Servidores sin conexiÃ³n",
          "Un tipo de antivirus"
        ],
        correctIndex: 1,
        interactive: true,
        icon: "ğŸŒ"
      },
      {
        text: "Â¿CuÃ¡l es la caracterÃ­stica principal de las tecnologÃ­as mÃ³viles?",
        options: [
          "Funcionan Ãºnicamente con cables",
          "Solo operan en oficinas",
          "Transmiten informaciÃ³n mediante ondas electromagnÃ©ticas",
          "No requieren software"
        ],
        correctIndex: 2,
        interactive: false
      },
      {
        text: "Â¿QuÃ© incluye un sistema de informaciÃ³n?",
        options: [
          "Solo computadoras",
          "Hardware, software, personas, datos y procesos",
          "Ãšnicamente aplicaciones",
          "Redes de internet"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Â¿QuÃ© es una amenaza informÃ¡tica?",
        options: [
          "Una notificaciÃ³n del sistema",
          "Un riesgo que puede afectar informaciÃ³n personal o financiera",
          "Un fallo de energÃ­a",
          "Un mensaje publicitario"
        ],
        correctIndex: 1,
        interactive: true,
        icon: "âš ï¸"
      },
      {
        text: "Â¿QuÃ© es el fraude informÃ¡tico?",
        options: [
          "Un error de software",
          "Un engaÃ±o digital para obtener dinero o informaciÃ³n",
          "Un virus sin consecuencias",
          "Un problema de conexiÃ³n"
        ],
        correctIndex: 1,
        interactive: false
      },
      {
        text: "Â¿QuÃ© es el phishing?",
        options: [
          "Robo fÃ­sico de equipos",
          "Correos engaÃ±osos que buscan obtener informaciÃ³n confidencial",
          "Un respaldo de datos",
          "Un antivirus avanzado"
        ],
        correctIndex: 1,
        interactive: true,
        icon: "ğŸ£"
      },
      {
        text: "Â¿QuÃ© es un ataque DoS?",
        options: [
          "Un mÃ©todo para acelerar internet",
          "Un sistema operativo daÃ±ado",
          "Un ataque que inhabilita un sistema o red",
          "Una tÃ©cnica de cifrado"
        ],
        correctIndex: 2,
        interactive: false
      },
      {
        text: "Â¿CuÃ¡l NO es una recomendaciÃ³n de seguridad?",
        options: [
          "Actualizar software",
          "Usar contraseÃ±as seguras",
          "Abrir correos sospechosos",
          "Revisar extractos bancarios"
        ],
        correctIndex: 2,
        interactive: true,
        icon: "ğŸ”’"
      },
      {
        text: "Â¿QuÃ© es el Metaverso?",
        options: [
          "Un tipo de buscador",
          "Un entorno virtual que permite interactuar mediante realidad virtual",
          "Una plataforma de antivirus",
          "Un sistema operativo"
        ],
        correctIndex: 1,
        interactive: true,
        icon: "ğŸ¥½"
      }
    ];

    let currentQuestionIndex = 0;

    // Referencias de pantallas
    const screens = {
      start: document.getElementById("screen-start"),
      instructions: document.getElementById("screen-instructions"),
      question: document.getElementById("screen-question"),
      correct: document.getElementById("screen-correct"),
      incorrect: document.getElementById("screen-incorrect"),
      end: document.getElementById("screen-end")
    };

    // Otros elementos
    const backgroundLayer = document.getElementById("background-layer");
    const startTitle = document.getElementById("start-title");
    const startSubtitle = document.getElementById("start-subtitle");
    const instructionsTitle = document.getElementById("instructions-title");
    const questionTitle = document.getElementById("question-title");
    const questionText = document.getElementById("question-text");
    const questionIcon = document.getElementById("question-icon");
    const questionCard = document.getElementById("question-card");
    const progressBar = document.getElementById("progress-bar");
    const optionButtons = {
      0: document.getElementById("option-a"),
      1: document.getElementById("option-b"),
      2: document.getElementById("option-c"),
      3: document.getElementById("option-d")
    };
    const finalTitle = document.getElementById("final-title");
    const finalText = document.getElementById("final-text");

    // Botones de navegaciÃ³n
    const btnStart = document.getElementById("btn-start");
    const btnGoQuestions = document.getElementById("btn-go-questions");
    const btnNextQuestion = document.getElementById("btn-next-question");
    const btnTryAgain = document.getElementById("btn-try-again");
    const btnRestart = document.getElementById("btn-restart");
    const btnBackHome = document.getElementById("btn-back-home");

    function showScreen(name) {
      Object.keys(screens).forEach(key => {
        const el = screens[key];
        if (key === name) {
          el.classList.remove("hidden");
          // AnimaciÃ³n de apariciÃ³n suave
          el.classList.remove("fade-enter-active");
          void el.offsetWidth;
          el.classList.add("fade-enter-active");
        } else {
          el.classList.add("hidden");
          el.classList.remove("fade-enter-active");
        }
      });
    }

    function loadQuestion(index) {
      const q = questions[index];
      const total = questions.length;
      questionTitle.textContent = "Pregunta " + (index + 1) + " / " + total;
      questionText.textContent = q.text;

      // Efectos interactivos segÃºn tipo de pregunta
      if (q.interactive && q.icon) {
        questionIcon.textContent = q.icon;
        questionIcon.classList.add("interactive-icon");
        questionCard.classList.add("interactive-question");
      } else {
        questionIcon.textContent = "â“";
        questionIcon.classList.remove("interactive-icon");
        questionCard.classList.remove("interactive-question");
      }

      // Progreso
      const ratio = (index) / total;
      progressBar.style.width = (ratio * 100) + "%";

      // Colores de las opciones (distintos)
      const optionColors = [
        "#6366f1", // morado
        "#f97316", // naranja
        "#e11d48", // rosa/rojo
        "#22c55e"  // verde
      ];

      q.options.forEach((opt, i) => {
        const btn = optionButtons[i];
        btn.setAttribute("data-index", i.toString());
        btn.querySelector("span:nth-child(2)").textContent = opt;
        btn.style.backgroundColor = optionColors[i];
        btn.style.color = "#ffffff";
      });
    }

    function handleAnswer(optionIndex) {
      const q = questions[currentQuestionIndex];
      const isCorrect = optionIndex === q.correctIndex;
      if (isCorrect) {
        showScreen("correct");
      } else {
        showScreen("incorrect");
      }
    }

    // Eventos
    btnStart.addEventListener("click", () => {
      showScreen("instructions");
    });

    btnGoQuestions.addEventListener("click", () => {
      currentQuestionIndex = 0;
      loadQuestion(currentQuestionIndex);
      showScreen("question");
    });

    Object.values(optionButtons).forEach(btn => {
      btn.addEventListener("click", (e) => {
        const idx = Number(e.currentTarget.getAttribute("data-index"));
        handleAnswer(idx);
      });
    });

    btnNextQuestion.addEventListener("click", () => {
      currentQuestionIndex++;
      if (currentQuestionIndex < questions.length) {
        loadQuestion(currentQuestionIndex);
        showScreen("question");
      } else {
        // Juego completado
        showScreen("end");
        // Llenar barra al 100%
        progressBar.style.width = "100%";
      }
    });

    btnTryAgain.addEventListener("click", () => {
      showScreen("question");
    });

    btnRestart.addEventListener("click", () => {
      currentQuestionIndex = 0;
      loadQuestion(currentQuestionIndex);
      progressBar.style.width = "0%";
      showScreen("question");
    });

    btnBackHome.addEventListener("click", () => {
      progressBar.style.width = "0%";
      showScreen("start");
    });

    // ==========================
    // APLICAR CONFIG (COLORES / FUENTE)
    // ==========================
    function applyConfig(config) {
      const cfg = { ...defaultConfig, ...config };

      // Colores
      const bgColor = cfg.background_color || defaultConfig.background_color;
      const surfaceColor = cfg.surface_color || defaultConfig.surface_color;
      const textColor = cfg.text_color || defaultConfig.text_color;
      const primaryColor = cfg.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = cfg.secondary_action_color || defaultConfig.secondary_action_color;

      // Fondo principal
      backgroundLayer.style.background = `radial-gradient(circle at top left, ${surfaceColor} 0, ${bgColor} 45%, #0b0b1f 100%)`;

      // Contenedor principal
      const gameContainer = document.getElementById("game-container");
      gameContainer.style.color = textColor;

      // Tarjetas / superficies
      const surfaces = document.querySelectorAll("#screen-instructions > div, #screen-question > div > div, #screen-correct > div, #screen-incorrect > div, #screen-end > div");
      surfaces.forEach(el => {
        el.style.backgroundColor = "rgba(255,255,255,0.96)";
        el.style.color = "#111827";
      });

      // Botones principales (verde)
      const primaryButtons = [btnStart, btnGoQuestions, btnNextQuestion, btnRestart];
      primaryButtons.forEach(btn => {
        if (!btn) return;
        btn.style.backgroundColor = primaryColor;
        btn.style.color = "#ffffff";
      });

      // Botones secundarios (morado)
      const secondaryButtons = [btnTryAgain, btnBackHome];
      secondaryButtons.forEach(btn => {
        if (!btn) return;
        btn.style.backgroundColor = secondaryColor;
        btn.style.color = "#ffffff";
      });

      // Progreso
      progressBar.style.backgroundColor = primaryColor;

      // TipografÃ­a y tamaÃ±os
      const baseFont = cfg.font_family || defaultConfig.font_family;
      const baseSize = Number(cfg.font_size || defaultConfig.font_size);

      document.body.style.fontFamily = `${baseFont}, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`;
      document.body.style.fontSize = baseSize + "px";

      // Escala de texto
      startTitle.style.fontSize = (baseSize * 1.8) + "px";
      startSubtitle.style.fontSize = (baseSize * 1) + "px";
      instructionsTitle.style.fontSize = (baseSize * 1.6) + "px";
      questionTitle.style.fontSize = (baseSize * 1.3) + "px";
      questionText.style.fontSize = (baseSize * 1.05) + "px";
      finalTitle.style.fontSize = (baseSize * 1.6) + "px";
      finalText.style.fontSize = (baseSize * 1.0) + "px";

      // Textos editables
      startTitle.textContent = cfg.main_title || defaultConfig.main_title;
      startSubtitle.textContent = cfg.subtitle || defaultConfig.subtitle;
      instructionsTitle.textContent = cfg.instructions_title || defaultConfig.instructions_title;
      finalTitle.textContent = cfg.final_title || defaultConfig.final_title;
      finalText.textContent = cfg.final_text || defaultConfig.final_text;
    }

    // ==========================
    // INICIALIZACIÃ“N ELEMENT SDK
    // ==========================
    (function initElementSdk() {
      if (!window.elementSdk) {
        // Si no estÃ¡ disponible (por ejemplo, en vista previa externa), aplicamos config por defecto.
        applyConfig(defaultConfig);
        showScreen("start");
        return;
      }

      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          applyConfig(config);
          // Mantener pantalla inicial visible si aÃºn no se ha navegado
          if (
            screens.start.classList.contains("hidden") &&
            screens.instructions.classList.contains("hidden") &&
            screens.question.classList.contains("hidden") &&
            screens.correct.classList.contains("hidden") &&
            screens.incorrect.classList.contains("hidden") &&
            screens.end.classList.contains("hidden")
          ) {
            showScreen("start");
          }
        },
        mapToCapabilities: (config) => {
          const cfg = config || defaultConfig;

          const backgroundRecolorable = {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              window.elementSdk.setConfig({ background_color: value });
            }
          };

          const surfaceRecolorable = {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (value) => {
              window.elementSdk.setConfig({ surface_color: value });
            }
          };

          const textRecolorable = {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              window.elementSdk.setConfig({ text_color: value });
            }
          };

          const primaryActionRecolorable = {
            get: () => cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              window.elementSdk.setConfig({ primary_action_color: value });
            }
          };

          const secondaryActionRecolorable = {
            get: () => cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              window.elementSdk.setConfig({ secondary_action_color: value });
            }
          };

          const fontEditable = {
            get: () => cfg.font_family || defaultConfig.font_family,
            set: (value) => {
              window.elementSdk.setConfig({ font_family: value });
            }
          };

          const fontSizeable = {
            get: () => Number(cfg.font_size || defaultConfig.font_size),
            set: (value) => {
              window.elementSdk.setConfig({ font_size: Number(value) });
            }
          };

          return {
            recolorables: [
              backgroundRecolorable,
              surfaceRecolorable,
              textRecolorable,
              primaryActionRecolorable,
              secondaryActionRecolorable
            ],
            borderables: [],
            fontEditable,
            fontSizeable
          };
        },
        mapToEditPanelValues: (config) => {
          const cfg = config || defaultConfig;
          return new Map([
            ["main_title", cfg.main_title || defaultConfig.main_title],
            ["subtitle", cfg.subtitle || defaultConfig.subtitle],
            ["instructions_title", cfg.instructions_title || defaultConfig.instructions_title],
            ["final_title", cfg.final_title || defaultConfig.final_title],
            ["final_text", cfg.final_text || defaultConfig.final_text]
          ]);
        }
      });
    })();

    // Vista inicial en caso de que el SDK tarde o no exista
    applyConfig(defaultConfig);
    showScreen("start");
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a1aadfb67f2f786',t:'MTc2MzY3MDM1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>